[workspace]
# Δηλώνουμε δύο services στο ίδιο repo
members = ["backend", "frontend"]

# --- Backend (Django) ---
[service.backend]
root = "backend"
start = "gunicorn core.wsgi:application --bind 0.0.0.0:${PORT}"
# Build steps: εγκαθιστά deps, collectstatic, migrate
build = """
pip install --upgrade pip
pip install -r requirements.txt
python manage.py collectstatic --noinput
python manage.py migrate --noinput
"""
# Προτείνεται volume για SQLite & media
# Tο volume το προσθέτεις από το UI και το κάνεις mount στο /app/storage
# Μετά θέσε env: SQLITE_PATH=/app/storage/db.sqlite3  MEDIA_ROOT=/app/storage/media

# --- Frontend (Static) ---
[service.frontend]
root = "frontend"
# Railway Static: χτίζει και σερβίρει το dist/
build = "npm ci && npm run build"
static = { directory = "dist" }
